<!--pages/home/index.wxml-->
<view class="page home">
  <custom-nav-bar title="今日待办" i-bg="i-bg">
  </custom-nav-bar>

  <empty-page style="height: 100%" wx:if="{{taskList.length === 0}}"></empty-page>
  <block wx:else>
    <view class="home__task-container">
      <task-item wx:for="{{taskList}}" wx:key="_id" taskItem="{{item}}"></task-item>
      <text wx:if="{{taskList.length > 7}}" class="list-end">到底啦～</text>
    </view>
  </block>

  <image bindtap="toAddTask" src="../../images/home/addTask.png" style="width: 70rpx; height: 70rpx;"
    class="home__add-task"></image>

  <!-- 表单内容 -->
  <van-popup show="{{ openTaskPage }}" position="bottom" custom-style="padding: 40rpx" bind:close="onClose">
    <van-cell-group>
      <van-field model:value="{{ taskName }}" required clearable label="任务名" placeholder="请输入任务名称" />
      <van-field model:value="{{ remark }}" label="备注" clearable placeholder="请输入备注" border="{{ false }}" />
    </van-cell-group>
    <van-button type="primary" bindtap="addTask">确认</van-button>
  </van-popup>

  <van-popup show="{{isShow}}" position="bottom">
    <login-com bind:changeAuthorize="changeAuthorize"></login-com>
  </van-popup>
</view>